<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36" version="27.2.0">
  <diagram name="Page-1" id="_ZlGANj4BAeM941qBgAH">
    <mxGraphModel dx="1246" dy="763" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" background="#99CCFF" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="uS9720hOOmhFFxQs8utE-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="uS9720hOOmhFFxQs8utE-1" target="uS9720hOOmhFFxQs8utE-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-1" value="User Input" style="ellipse;whiteSpace=wrap;html=1;fillColor=#FFFF66;" vertex="1" parent="1">
          <mxGeometry x="364" y="150" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="uS9720hOOmhFFxQs8utE-2" target="uS9720hOOmhFFxQs8utE-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-2" value="Intent Detection" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="384" y="250" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-4" value="Chat history w/&amp;nbsp;&lt;div&gt;intent detection instruction&lt;/div&gt;" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="554" y="200" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-7" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="uS9720hOOmhFFxQs8utE-1" target="uS9720hOOmhFFxQs8utE-2">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="504" y="270" as="sourcePoint" />
            <mxPoint x="554" y="220" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-8" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="uS9720hOOmhFFxQs8utE-4">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="434" y="210" as="sourcePoint" />
            <mxPoint x="424" y="225" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-10" value="&lt;div&gt;RESPOND&lt;/div&gt;&lt;div&gt;&quot;Malicious intent&lt;/div&gt;&lt;div&gt;detected&quot;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E83E3E;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="554" y="260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-11" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" target="uS9720hOOmhFFxQs8utE-10">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="464" y="290" as="sourcePoint" />
            <mxPoint x="514" y="240" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-12" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;&lt;font style=&quot;&quot;&gt;Malicious &lt;/font&gt;detected&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="458" y="263" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="uS9720hOOmhFFxQs8utE-14" target="uS9720hOOmhFFxQs8utE-36">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-14" value="LLM to parse response to tool schema" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="364" y="360" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="uS9720hOOmhFFxQs8utE-15" target="uS9720hOOmhFFxQs8utE-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-15" value="LLM Process response" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="194" y="260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-16" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="uS9720hOOmhFFxQs8utE-2" target="uS9720hOOmhFFxQs8utE-15">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="564" y="235" as="sourcePoint" />
            <mxPoint x="434" y="235" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-17" value="&lt;span style=&quot;font-size: 10px;&quot;&gt;Casual Chat&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="304" y="260" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="uS9720hOOmhFFxQs8utE-20" target="uS9720hOOmhFFxQs8utE-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-20" value="&lt;span style=&quot;font-size: 10px;&quot;&gt;Test if it is faster to just let the intent detection part to answer the chat if it detected it, or to pass it again to another llm. Try different model for intent and chat when doing the latter&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#3399FF;strokeColor=#99CCFF;" vertex="1" parent="1">
          <mxGeometry x="14" y="130" width="260" height="90" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="uS9720hOOmhFFxQs8utE-23" target="uS9720hOOmhFFxQs8utE-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-23" value="Chat history w/&amp;nbsp;&lt;div&gt;chat response instruction&lt;/div&gt;" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="34" y="265" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-25" value="RESPOND&lt;div&gt;to user prompt&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=light-dark(#58cc4b, #ededed);strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="194" y="350" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-28" value="&lt;span style=&quot;font-size: 10px;&quot;&gt;Tool use&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="404" y="330" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="uS9720hOOmhFFxQs8utE-29" target="uS9720hOOmhFFxQs8utE-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-29" value="Vector DB&amp;nbsp;&lt;div&gt;tool selection&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="694" y="360" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-32" value="&lt;span style=&quot;font-size: 10px;&quot;&gt;Tool selected&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="544" y="360" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="uS9720hOOmhFFxQs8utE-33">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="514" y="390" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-33" value="Chat history w/&amp;nbsp;&lt;div&gt;tool use instruction&lt;/div&gt;" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="694" y="440" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-34" value="" style="endArrow=classic;html=1;rounded=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="754" y="330" as="sourcePoint" />
            <mxPoint x="524" y="390" as="targetPoint" />
            <Array as="points">
              <mxPoint x="524" y="330" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="uS9720hOOmhFFxQs8utE-36" target="uS9720hOOmhFFxQs8utE-38">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-36" value="Python use tool" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="364" y="460" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="uS9720hOOmhFFxQs8utE-38" target="uS9720hOOmhFFxQs8utE-40">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-38" value="LLM make response based on tool output" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="364" y="560" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-40" value="RESPOND&lt;div&gt;to user prompt&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=light-dark(#58cc4b, #ededed);" vertex="1" parent="1">
          <mxGeometry x="364" y="660" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="uS9720hOOmhFFxQs8utE-42" value="&lt;font style=&quot;font-size: 51px;&quot;&gt;Flowchart for Main Python logic&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="8" y="20" width="812" height="70" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
